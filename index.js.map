{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\n\nconst gallery = document.querySelector(\".gallery\");\n\n\nexport async function searchImage(userValue, page) {\n    try {\n        const BASE_URL = 'https://pixabay.com';\n        const END_POINT = '/api/';\n\n        const params = new URLSearchParams({\n            key: '48801957-4c351c0f3a606f3cba9240365',\n            q: userValue,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 40,\n            page: page,\n        });\n\n        const url = `${BASE_URL}${END_POINT}?${params}`;\n        const res = await axios.get(url);\n        console.log(res.data.hits.length);\n        \n        if (res.data.hits.length !== 0) {\n            // return res.data.hits;\n            return res.data;\n        \n        } else {\n            gallery.innerHTML = \"\";\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            return Promise.reject('No images found');\n        }\n    }\n          catch (er) {\n          console.error(\"Fetch error:\", er);\n          iziToast.error({\n              title: \"Error\",\n              message: \"Something went wrong. Please try again later.\",\n          });\n          throw er;\n      }\n}","import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\nfunction imageTemplate(image) {\n  const { webformatURL, largeImageURL, tags, likes, views, comments, downloads} = image;\n    return `\n    <div class=\"image-card\">\n    <a href=\"${largeImageURL}\" class=\"gallery-link\">\n  <div class=\"image-container\">\n    <img\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </div>\n  </a>\n<div class=\"image-body\">\n  <div class=\"image-column\">\n    <p class=\"image-info\">Likes</p>\n    <p class=\"image-value\">${likes}</p>\n  </div>\n  <div class=\"image-column\">\n    <p class=\"image-info\">Views</p>\n    <p class=\"image-value\">${views}</p>\n  </div>\n  <div class=\"image-column\">\n    <p class=\"image-info\">Comments</p>\n    <p class=\"image-value\">${comments}</p>\n  </div>\n  <div class=\"image-column\">\n    <p class=\"image-info\">Downloads</p>\n    <p class=\"image-value\">${downloads}</p>\n  </div>\n</div>\n</div>`;\n}\n\nexport function renderImages(images) {\n    console.log(images);\n    const markup = images\n        .map((image) => imageTemplate(image))\n        .join(\"\"); \n    gallery.innerHTML = markup;\n\n  lightbox.refresh(); \n};\n\nexport function renderMoreImages(images) {\n    console.log(images);\n    const markup = images\n        .map((image) => imageTemplate(image))\n        .join(\"\"); \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh(); \n}\n\n\n","\nimport axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { searchImage } from \"./js/pixabay-api.js\";\nimport { renderImages } from \"./js/render-functions.js\";\nimport { renderMoreImages } from \"./js/render-functions.js\";\n\n\nconst form = document.querySelector(\".formImage\");\nconst btnSearch = document.querySelector(\".btn_search\");\nconst input = document.querySelector(\".inputImage\");\nconst gallery = document.querySelector(\".gallery\");\n\nconst loader = document.querySelector(\".loader\");\n\nconst btnLoadMore = document.querySelector(\".btn-load-more\");\n\nfunction showLoader() {\n  loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loader.style.display = \"none\";\n}\n\nfunction showBtn() {\n  btnLoadMore.style.display = \"block\";\n}\n\nfunction hideBtn() {\n  btnLoadMore.style.display = \"none\";\n}\n\nfunction checkBtnStatus() {\n    console.log(params.total);\n    console.log(params.perPage);\n    const maxPage = Math.ceil(params.total / params.perPage);\n    console.log(maxPage);\n    if (params.page >= maxPage) {\n        hideBtn();\n        iziToast.info({\n            title: 'info',\n            position: 'topRight',\n            message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        console.log(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n        showBtn();\n    }\n}\n\n\nconst params = {\n    userValue: '',\n    page: 1,\n    total: 0,\n    perPage: 40,\n}\n\nhideLoader()\nhideBtn()\nform.addEventListener('submit', ev => {\n    ev.preventDefault();\n\n    params.userValue = input.value.trim()\n    console.log(params.userValue);\n    params.page = 1;\n\n    if (params.userValue === \"\") {\n        gallery.innerHTML = \"\";\n        iziToast.error({\n            title: 'Error',\n            message: 'Please, full the field!',\n        });\n        return;\n    } else {\n        console.log('make HTTP request');\n        showLoader();\n        async function fetchAndRenderImages() {\n            try {\n                const res = await searchImage(params.userValue, params.page);\n                params.total = res.total;\n                renderImages(res.hits);\n                checkBtnStatus();\n                smoothScroll();\n        \n            }\n            catch (error) { console.log(error); }\n        finally {\n                hideLoader();\n            }\n        }\n        fetchAndRenderImages();\n        ev.target.reset();\n    }\n    \n})\n\nbtnLoadMore.addEventListener('click', ev => {\n    params.page += 1;\n    showLoader();\n        async function fetchAndRenderImages() {\n            try {\n                const res = await searchImage(params.userValue, params.page);\n                renderMoreImages(res.hits);\n                checkBtnStatus();\n                smoothScroll();\n            }\n            catch (error) { console.log(error); }\n        finally {\n                hideLoader();\n            }\n        }\n        fetchAndRenderImages();\n})\n\n\nfunction smoothScroll() {\n    const firstCard = document.querySelector(\".gallery .image-card\");\n    \n    if (firstCard) {\n        const cardHeight = firstCard.getBoundingClientRect().height;\n        \n        window.scrollBy({\n            top: cardHeight * 2, \n            behavior: \"smooth\" \n        });\n    }\n}\n\n\n\n\n\n\n            \n\n        \n    \n"],"names":["gallery","searchImage","userValue","page","BASE_URL","END_POINT","params","url","res","axios","iziToast","er","lightbox","SimpleLightbox","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImages","images","markup","renderMoreImages","form","input","loader","btnLoadMore","showLoader","hideLoader","showBtn","hideBtn","checkBtnStatus","maxPage","ev","fetchAndRenderImages","smoothScroll","error","firstCard","cardHeight"],"mappings":"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"}